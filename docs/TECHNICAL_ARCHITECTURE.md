# NeX: AI-CLI æŠ€æœ¯æ¶æ„æ–‡æ¡£

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NeX: AI-CLI                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ ç”¨æˆ·æ¥å£å±‚ (CLI Interface)                                â”‚
â”‚  â”œâ”€â”€ å‘½ä»¤è¡Œè§£æå™¨ (CLI Parser)                               â”‚
â”‚  â”œâ”€â”€ äº¤äº’å¼Shell (Interactive Shell)                        â”‚
â”‚  â””â”€â”€ é…ç½®ç®¡ç†å™¨ (Configuration Manager)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§  AIé›†æˆå±‚ (AI Integration) [è®¡åˆ’ä¸­]                       â”‚
â”‚  â”œâ”€â”€ æ¨¡å‹ç®¡ç†å™¨ (Model Manager)                             â”‚
â”‚  â”œâ”€â”€ æ¨ç†å¼•æ“ (Inference Engine)                            â”‚
â”‚  â”œâ”€â”€ ä¸Šä¸‹æ–‡ç®¡ç† (Context Manager)                           â”‚
â”‚  â””â”€â”€ æ™ºèƒ½åŠ©æ‰‹ (Intelligent Assistant)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš¡ æ ¸å¿ƒåŠŸèƒ½å±‚ (Core Features)                                â”‚
â”‚  â”œâ”€â”€ Shellæ‰§è¡Œå¼•æ“ (Shell Execution Engine)                 â”‚
â”‚  â”œâ”€â”€ å‘½ä»¤è§£æå™¨ (Command Parser)                            â”‚
â”‚  â”œâ”€â”€ ç¯å¢ƒç®¡ç†å™¨ (Environment Manager)                       â”‚
â”‚  â”œâ”€â”€ è¯­æ³•é«˜äº®å™¨ (Syntax Highlighter)                        â”‚
â”‚  â””â”€â”€ è‡ªåŠ¨è¡¥å…¨å™¨ (Auto Completer)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”§ ç³»ç»ŸæœåŠ¡å±‚ (System Services)                             â”‚
â”‚  â”œâ”€â”€ ç³»ç»Ÿç›‘æ§å™¨ (System Monitor)                            â”‚
â”‚  â”œâ”€â”€ Gité›†æˆå™¨ (Git Integration)                            â”‚
â”‚  â”œâ”€â”€ æ–‡ä»¶ç³»ç»Ÿ (File System)                                 â”‚
â”‚  â””â”€â”€ è¿›ç¨‹ç®¡ç† (Process Management)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”Œ å¹³å°æŠ½è±¡å±‚ (Platform Abstraction)                        â”‚
â”‚  â”œâ”€â”€ Linuxå®ç° (Linux Implementation)                       â”‚
â”‚  â”œâ”€â”€ Windowså®ç° (Windows Implementation) [é¢„ç•™]           â”‚
â”‚  â””â”€â”€ macOSå®ç° (macOS Implementation) [é¢„ç•™]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. Shellæ‰§è¡Œå¼•æ“ (Shell Execution Engine)

**èŒè´£**: è§£æå’Œæ‰§è¡Œç”¨æˆ·å‘½ä»¤

**æ ¸å¿ƒç±»**:
- `CommandParser`: å‘½ä»¤è¡Œè§£æ
- `CommandExecutor`: å‘½ä»¤æ‰§è¡Œ
- `Pipeline`: ç®¡é“å¤„ç†
- `Environment`: ç¯å¢ƒå˜é‡ç®¡ç†

**å…³é”®ç‰¹æ€§**:
- æ”¯æŒå¤æ‚ç®¡é“ (`|`)
- I/Oé‡å®šå‘ (`>`, `<`, `>>`)
- åå°æ‰§è¡Œ (`&`)
- ç¯å¢ƒå˜é‡å±•å¼€ (`$VAR`)
- å†…ç½®å‘½ä»¤æ‰©å±•

### 2. è¯­æ³•é«˜äº®å™¨ (Syntax Highlighter)

**èŒè´£**: å®æ—¶å‘½ä»¤è¡Œè¯­æ³•é«˜äº®

**å®ç°ç­–ç•¥**:
```cpp
class SyntaxHighlighter {
public:
    static std::string highlight(const std::string& line);
private:
    static bool isCommand(const std::string& word);
    static bool isPath(const std::string& word);
    static bool isFlag(const std::string& word);
    // ... æ›´å¤šè¯†åˆ«å‡½æ•°
};
```

### 3. æ™ºèƒ½è¡¥å…¨ç³»ç»Ÿ (Auto Completion)

**å¤šå±‚æ¬¡è¡¥å…¨**:
1. **å‘½ä»¤è¡¥å…¨**: åŸºäºPATHçš„å¯æ‰§è¡Œæ–‡ä»¶
2. **è·¯å¾„è¡¥å…¨**: æ–‡ä»¶ç³»ç»Ÿè·¯å¾„è¡¥å…¨
3. **é€‰é¡¹è¡¥å…¨**: å‘½ä»¤ç‰¹å®šé€‰é¡¹
4. **ä¸Šä¸‹æ–‡è¡¥å…¨**: åŸºäºå†å²å’Œå½“å‰çŠ¶æ€

### 4. é…ç½®ç®¡ç†ç³»ç»Ÿ

**åˆ†å±‚é…ç½®æ¶æ„**:
```
ç”¨æˆ·é…ç½® (~/.nex/config.ini)
    â†“ è¦†ç›–
ç³»ç»Ÿé…ç½® (/etc/nex/config.ini)
    â†“ è¦†ç›–
é»˜è®¤é…ç½® (ä»£ç å†…ç½®)
```

## ğŸ¤– AIæ¨¡å‹é›†æˆè§„åˆ’

### å½“å‰æŠ€æœ¯æ ˆä¸ºAIé›†æˆçš„ä¼˜åŠ¿

1. **æ¨¡å—åŒ–æ¶æ„**: æ˜“äºæ’å…¥AIæ¨¡å—
2. **é…ç½®é©±åŠ¨**: AIè¡Œä¸ºå¯é…ç½®åŒ–
3. **ä¸Šä¸‹æ–‡ä¸°å¯Œ**: ShellçŠ¶æ€ã€Gitä¿¡æ¯ã€ç³»ç»Ÿç›‘æ§
4. **è·¨å¹³å°åŸºç¡€**: æ”¯æŒå¤šç§AIæ¨ç†åç«¯

### AIé›†æˆå€™é€‰æ–¹æ¡ˆ

#### æ–¹æ¡ˆä¸€ï¼šæœ¬åœ°å°æ¨¡å‹é›†æˆ

**æ¨èæ¨¡å‹**:
- **Phi-3 Mini** (3.8Bå‚æ•°)
  - ä¼˜åŠ¿: ä½“ç§¯å°ã€æ¨ç†å¿«ã€ä»£ç å‹å¥½
  - å†…å­˜éœ€æ±‚: ~4-6GB
  - ä¸“é•¿: ä»£ç ç”Ÿæˆã€å‘½ä»¤è§£é‡Š

- **CodeLlama-7B-Instruct**
  - ä¼˜åŠ¿: ä¸“é—¨é’ˆå¯¹ä»£ç ä»»åŠ¡è®­ç»ƒ
  - å†…å­˜éœ€æ±‚: ~8-12GB
  - ä¸“é•¿: Shellè„šæœ¬ã€ç³»ç»Ÿç®¡ç†

- **Mistral-7B-Instruct**
  - ä¼˜åŠ¿: é€šç”¨èƒ½åŠ›å¼ºã€æ¨ç†æ•ˆç‡é«˜
  - å†…å­˜éœ€æ±‚: ~8-12GB
  - ä¸“é•¿: ä»»åŠ¡è§„åˆ’ã€é—®é¢˜è§£å†³

**æŠ€æœ¯å®ç°**:
```cpp
namespace nex::ai {
    class ModelManager {
    public:
        bool loadModel(const std::string& model_path);
        std::string inference(const std::string& prompt, const AIContext& context);
        void unloadModel();
    private:
        std::unique_ptr<InferenceEngine> engine_;
    };
    
    struct AIContext {
        std::string current_directory;
        std::vector<std::string> command_history;
        SystemStatus system_status;
        GitStatus git_status;
        std::map<std::string, std::string> environment_vars;
    };
}
```

#### æ–¹æ¡ˆäºŒï¼šæ··åˆæ¨ç†æ¶æ„

**æœ¬åœ° + äº‘ç«¯ç»“åˆ**:
- **æœ¬åœ°æ¨¡å‹**: å¿«é€Ÿå“åº”çš„å°ä»»åŠ¡ (å‘½ä»¤è¡¥å…¨ã€é”™è¯¯ä¿®æ­£)
- **äº‘ç«¯æ¨¡å‹**: å¤æ‚åˆ†æä»»åŠ¡ (ç³»ç»Ÿè¯Šæ–­ã€è„šæœ¬ç”Ÿæˆ)

#### æ–¹æ¡ˆä¸‰ï¼šä¸“ç”¨å·¥å…·é“¾é›†æˆ

**å·¥å…·ç‰¹åŒ–**:
- **å‘½ä»¤å»ºè®®**: åŸºäºå†å²å’Œä¸Šä¸‹æ–‡çš„å‘½ä»¤æ¨è
- **é”™è¯¯è¯Šæ–­**: åˆ†æå‘½ä»¤å¤±è´¥åŸå› å¹¶æä¾›ä¿®å¤å»ºè®®
- **è„šæœ¬ç”Ÿæˆ**: æ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ç”ŸæˆShellè„šæœ¬
- **ç³»ç»Ÿåˆ†æ**: åŸºäºç›‘æ§æ•°æ®çš„æ€§èƒ½åˆ†æ

### æ¨ç†å¼•æ“é€‰æ‹©

#### ONNX Runtime
```cpp
#include <onnxruntime_cxx_api.h>

class ONNXInferenceEngine {
public:
    bool initialize(const std::string& model_path);
    std::vector<float> inference(const std::vector<float>& input);
private:
    Ort::Session session_;
    Ort::Env env_;
};
```

**ä¼˜åŠ¿**:
- è·¨å¹³å°æ”¯æŒ
- å¤šç§åç«¯ (CPU, CUDA, ROCm)
- ä¼˜åŒ–çš„æ¨ç†æ€§èƒ½
- å¹¿æ³›çš„æ¨¡å‹æ”¯æŒ

#### llama.cppé›†æˆ
```cpp
#include "llama.h"

class LlamaCppEngine {
public:
    bool loadModel(const std::string& gguf_path);
    std::string generateText(const std::string& prompt, int max_tokens = 512);
private:
    llama_model* model_;
    llama_context* ctx_;
};
```

**ä¼˜åŠ¿**:
- ä¸“é—¨é’ˆå¯¹LLMä¼˜åŒ–
- æ”¯æŒé‡åŒ–æ¨¡å‹ (GGUFæ ¼å¼)
- CPUæ¨ç†ä¼˜åŒ–
- å†…å­˜æ•ˆç‡é«˜

### AIåŠŸèƒ½è®¾è®¡

#### 1. æ™ºèƒ½å‘½ä»¤åŠ©æ‰‹

**è§¦å‘æ–¹å¼**:
```bash
# è‡ªç„¶è¯­è¨€æŸ¥è¯¢
nex ai "æŸ¥æ‰¾å¤§äº100MBçš„æ–‡ä»¶"
# â†’ find . -size +100M -type f

# å‘½ä»¤è§£é‡Š
nex ai explain "tar -xzf archive.tar.gz"
# â†’ è§£é‡Š: è§£å‹gzipå‹ç¼©çš„tarå½’æ¡£æ–‡ä»¶

# é”™è¯¯è¯Šæ–­
command_that_failed  # å¤±è´¥åè‡ªåŠ¨è§¦å‘
# â†’ AIåˆ†æ: æƒé™ä¸è¶³ï¼Œå»ºè®®ä½¿ç”¨sudo
```

#### 2. ä¸Šä¸‹æ–‡æ„ŸçŸ¥å»ºè®®

**å®ç°ç¤ºä¾‹**:
```cpp
class ContextAwareAssistant {
public:
    std::vector<std::string> getSuggestions(const AIContext& context) {
        std::string prompt = buildContextPrompt(context);
        std::string response = model_manager_.inference(prompt, context);
        return parseCommands(response);
    }
    
private:
    std::string buildContextPrompt(const AIContext& context) {
        std::ostringstream prompt;
        prompt << "Current directory: " << context.current_directory << "\n";
        prompt << "Git branch: " << context.git_status.branch << "\n";
        prompt << "System load: " << context.system_status.load_average << "\n";
        // ... æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯
        prompt << "Suggest relevant commands:\n";
        return prompt.str();
    }
};
```

#### 3. è‡ªåŠ¨åŒ–è„šæœ¬ç”Ÿæˆ

**ç”¨æˆ·ä½“éªŒ**:
```bash
nex ai script "æ¯å¤©å¤‡ä»½é¡¹ç›®æ–‡ä»¶åˆ°å¤–éƒ¨ç¡¬ç›˜"
```

**AIè¾“å‡º**:
```bash
#!/bin/bash
# è‡ªåŠ¨å¤‡ä»½è„šæœ¬ - ç”±NeX AIç”Ÿæˆ

SOURCE_DIR="$HOME/projects"
BACKUP_DIR="/media/external/backup"
DATE=$(date +%Y%m%d)

# åˆ›å»ºå¸¦æ—¥æœŸçš„å¤‡ä»½ç›®å½•
mkdir -p "$BACKUP_DIR/$DATE"

# ä½¿ç”¨rsyncè¿›è¡Œå¢é‡å¤‡ä»½
rsync -av --delete "$SOURCE_DIR/" "$BACKUP_DIR/$DATE/"

# è®°å½•å¤‡ä»½æ—¥å¿—
echo "$(date): Backup completed to $BACKUP_DIR/$DATE" >> ~/.nex_backup.log
```

### å†…å­˜å’Œæ€§èƒ½ä¼˜åŒ–

#### æ¨¡å‹é‡åŒ–ç­–ç•¥
```cpp
class ModelOptimizer {
public:
    // INT8é‡åŒ–
    bool quantizeToINT8(const std::string& model_path);
    
    // åŠ¨æ€åŠ è½½
    void lazyLoadModel();
    void unloadWhenIdle(int idle_seconds = 300);
    
    // ç¼“å­˜ç­–ç•¥
    void enableResponseCache(size_t max_cache_size = 1000);
};
```

#### æ¨ç†ä¼˜åŒ–
- **æ‰¹å¤„ç†**: åˆå¹¶å¤šä¸ªå°è¯·æ±‚
- **ç¼“å­˜**: å¸¸è§æŸ¥è¯¢ç»“æœç¼“å­˜
- **é¢„åŠ è½½**: é¢„æµ‹æ€§æ¨¡å‹åŠ è½½
- **æµå¼è¾“å‡º**: é•¿æ–‡æœ¬æµå¼ç”Ÿæˆ

### å®‰å…¨å’Œéšç§

#### æœ¬åœ°ä¼˜å…ˆåŸåˆ™
```cpp
class AISecurityManager {
public:
    // æ•°æ®ä¸ç¦»å¼€æœ¬åœ°
    bool isDataLocalOnly() const { return true; }
    
    // æ•æ„Ÿä¿¡æ¯è¿‡æ»¤
    std::string sanitizeInput(const std::string& input);
    
    // å‘½ä»¤æ‰§è¡Œæƒé™æ§åˆ¶
    bool validateCommandSafety(const std::string& command);
};
```

#### éšç§ä¿æŠ¤æªæ–½
- **æœ¬åœ°æ¨ç†**: æ•°æ®ä¸ä¸Šä¼ åˆ°äº‘ç«¯
- **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤**: è‡ªåŠ¨è¯†åˆ«å¹¶è„±æ•æ•æ„Ÿæ•°æ®
- **å‘½ä»¤å®¡æ ¸**: AIç”Ÿæˆçš„å‘½ä»¤éœ€è¦ç”¨æˆ·ç¡®è®¤
- **æ‰§è¡Œæ²™ç›’**: å±é™©å‘½ä»¤åœ¨éš”ç¦»ç¯å¢ƒä¸­é¢„è§ˆ

## ğŸ”„ å¼€å‘è·¯çº¿å›¾

### Phase 1: AIåŸºç¡€è®¾æ–½ (å½“å‰ â†’ 1ä¸ªæœˆ)
- [ ] AIæ¨¡å—æ¶æ„è®¾è®¡
- [ ] ONNX Runtimeé›†æˆ
- [ ] åŸºç¡€æ¨ç†å¼•æ“å®ç°
- [ ] é…ç½®ç³»ç»Ÿæ‰©å±•

### Phase 2: æ ¸å¿ƒAIåŠŸèƒ½ (1-2ä¸ªæœˆ)
- [ ] å‘½ä»¤å»ºè®®ç³»ç»Ÿ
- [ ] è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ¥å£  
- [ ] ä¸Šä¸‹æ–‡æ„ŸçŸ¥åŠ©æ‰‹
- [ ] é”™è¯¯è¯Šæ–­åŠŸèƒ½

### Phase 3: é«˜çº§AIç‰¹æ€§ (2-3ä¸ªæœˆ)
- [ ] è„šæœ¬è‡ªåŠ¨ç”Ÿæˆ
- [ ] æ™ºèƒ½ç³»ç»Ÿåˆ†æ
- [ ] å­¦ä¹ ç”¨æˆ·ä¹ æƒ¯
- [ ] æ€§èƒ½ä¼˜åŒ–

### Phase 4: ç”Ÿæ€ç³»ç»Ÿ (3-4ä¸ªæœˆ)
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] æ¨¡å‹å¸‚åœº
- [ ] ç¤¾åŒºè´¡çŒ®å·¥å…·
- [ ] ä¼ä¸šç‰ˆåŠŸèƒ½

---

ç°åœ¨æˆ‘ä»¬æœ‰äº†å®Œæ•´çš„æŠ€æœ¯åŸºç¡€å’Œæ¸…æ™°çš„AIé›†æˆè§„åˆ’ã€‚æ‚¨è§‰å¾—æˆ‘ä»¬åº”è¯¥ä»å“ªä¸ªAIé›†æˆæ–¹æ¡ˆå¼€å§‹ï¼Ÿæˆ‘ä¸ªäººæ¨èä»**æœ¬åœ°å°æ¨¡å‹é›†æˆ**å¼€å§‹ï¼Œå› ä¸ºå®ƒå¹³è¡¡äº†åŠŸèƒ½æ€§å’Œå®ç”¨æ€§ã€‚
